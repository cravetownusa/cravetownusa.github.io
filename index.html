<html>
<html lang="en">
<head>
    <title>Cravetown, USA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />
    <script>
        let width = 1;
        let cravings = 0;
        let milestone25 = document.getElementById("milestone25");
        milestone25.innerHTML = "Achievement: ${cravings} Cravings Resisted";
        
        function getTimeStamp() {
                var now = new Date();
                return ((now.getMonth() + 1) + '/' + (now.getDate()) + '/' + now.getFullYear() + " " + now.getHours() + ':'
                             + ((now.getMinutes() < 10) ? ("0" + now.getMinutes()) : (now.getMinutes())) + ':' + ((now.getSeconds() < 10) ? ("0" + now
                             .getSeconds()) : (now.getSeconds())) + "  +1 \n");
        }


        function printSuccess() {
               return ("/*(^u^)/* Great job resisting! /*(^u^)/*\n");
        }

        function clearText() {
                return localStorage.clear();
        }

        function saveResults() {
                let savedText = document.getElementById("results").value;
                let savedCount = document.getElementById("daily").value;
                let savedBar = width;
                savedText = JSON.stringify(savedText);
                savedCount = JSON.stringify(savedCount);
                localStorage.setItem("file", savedText);
                localStorage.setItem("count", savedCount);
                localStorage.setItem("bar", savedBar);
        }

                       
    </script>
</head>
<body style="display:flex;flex-direction:row;">
    
    <div class="left-panel">
        <h1>Cravetown, USA</h1>
        <image src="IMG_5040.gif" height="300px" width="300px" />
        <br><br><br>
        <div id="progress">
            <div id="bar" style="color:black;font-weight:bold;text-align:center;"></div>
        </div>
        <br><br><br>
        <form name="timeForm" id="appform">
            <div class="buttons">
                <button id="crave" type="button" onclick="this.form.timeField.value+=printSuccess()">Crave</button>
                <br>
                <button id="cave" type="button" onclick="this.form.timeField.value+=getTimeStamp()">Cave</button>
                <script>
                    document.getElementById("cave").addEventListener('click', ()=> {
                        let daily = document.getElementById("daily");
                        let currentValue = parseInt(daily.value);
                        daily.value = currentValue + 1;
                    });
                    document.getElementById("crave").addEventListener('click', ()=> {
                        let bar = document.getElementById("bar");
                        width++;
                        bar.style.width = width + "vw";
                        bar.innerHTML = width;
                    });
                </script>
            </div>
            <br><br>
            <!-- <image src="IMG_5009.gif" width="100px" height="100px" /> -->
            <h1>Total Caves</h1> 
            <input type="text" id="daily" value="0" style="border:none;font-size:72;font-weight:bold"></input>
            <br><br>
            <button id="clear" onclick="this.form.timeField.value=clearText()">Clear</button>
            <button id="save" onclick="this.form.timeField.value=saveResults()">Save</button>
            <h2>Log: </h2>
            <textarea name="timeField" id="results" rows="50" cols="1" style="font-size:20;font-weight: bold;"></textarea>
        </form>
            <script>
                    let storedText = document.getElementById("results");
                    let storedCount = document.getElementById("daily");
                    let storedBar = document.getElementById("bar");
                    if (localStorage.getItem("file")) {
                        storedText.value = JSON.parse(localStorage.getItem("file"));
                    }
                    if (localStorage.getItem("count")) {
                        storedCount.value = JSON.parse(localStorage.getItem("count"));
                    }
                    if (localStorage.getItem("bar")) {
                        storedBar.style.width = Number(localStorage.getItem("bar"));
                    }
            </script>
    </div>
</body>
